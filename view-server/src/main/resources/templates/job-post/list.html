<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <!--  css 경로 확인하고 사용해주세용 -->
    <link rel="stylesheet" href="../../static/common/css/common.css">
    <script src="../../static/javascript/utils/axios.js"></script>
    <script src="../../static/javascript/utils/imageUtil.js"></script>
</head>
<body>
<div class="container">
    <header th:replace="/layout/header :: headerFragment"></header>
    <nav th:replace="/layout/navbar :: navbarFragment"></nav>
    <div class="content">
        <h2>채용 공고 리스트 </h2>

        <div id="job-post-container">

        </div>


    </div>
    <footer th:replace="/layout/footer :: footerFragment"></footer>
</div>
<script>
    window.onload = function getList(){
        axios.get('http://localhost:8080/api/v1/job-post/list', {
            headers: {
                'Content-Type': 'application/json'
            }
        })
            .then(response => {
                console.log("가져오기 성공");
                const jobPosts = response.data;
                jobPosts.forEach(jobPosts=>{
                    console.log(`제목: ${jobPost.title}`);
                    console.log(`기술: ${jobPost.jobPostSkills}`);
                    console.log(`회사 아이디: ${jobPost.username}`);
                });

                //기업정보 + 채용정보 가져오기

                const jobPostContainer = document.getElementById("job-post-container");
                jobPosts.forEach(jobPost => {
                    const jobPostElement = document.createElement("div");
                    jobPostElement.classList.add("job-post");
                    jobPostElement.innerHTML = `
                <h3>${jobPost.title}</h3>
                <p><strong>기술:</strong> ${jobPost.jobPostSkills}</p>
                <p><strong>회사:</strong> ${jobPost.username}</p>
                <p><strong>주소:</strong> ${jobPost.address}</p>
            `;
                    jobPostContainer.appendChild(jobPostElement);
                });
            })
            .catch(error => {
                console.error("가져오기 실패:", error);
                alert("리스트 정보를 가져오기 실패, 다시 시도해주세요.");
            });
    }

</script>
</body>
</html>